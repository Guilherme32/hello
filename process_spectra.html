
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>process_spectra module &#8212; process_spectra today documentation</title>
    <link rel="stylesheet" href="nature.css" type="text/css" />
    <link rel="stylesheet" href="pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="nature_changes.css" />
    <script id="documentation_options" data-url_root="../" src="documentation_options.js"></script>
    <script src="jquery.js"></script>
    <script src="underscore.js"></script>
    <script src="doctools.js"></script>
    <script src="language_data.js"></script>
    <link rel="shortcut icon" href="python_icon.png"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">process_spectra today documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">process_spectra module</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-process_spectra">
<span id="process-spectra-module"></span><h1>process_spectra module<a class="headerlink" href="#module-process_spectra" title="Permalink to this headline">¶</a></h1>
<p>Created on Tue Feb 11 17:58:09 2020</p>
<p>&#64;author: Felipe Barino</p>
<dl class="py class">
<dt id="process_spectra.MassSpectraData">
<em class="property">class </em><code class="sig-prename descclassname">process_spectra.</code><code class="sig-name descname">MassSpectraData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filenames</span></em>, <em class="sig-param"><span class="n">output_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">add_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">50</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.MassSpectraData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Uma classe usada para processar vários espectros de uma vez.</p>
<dl class="py method">
<dt id="process_spectra.MassSpectraData.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filenames</span></em>, <em class="sig-param"><span class="n">output_path</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">add_info</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">batch_size</span><span class="o">=</span><span class="default_value">50</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.MassSpectraData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inicia o objeto, criando umas variáveis necessárias..</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filenames</strong> (<em>array like</em>) – Um array like com os nomes dos arquivos dos
espectros a serem abertos.</p></li>
<li><p><strong>output_path</strong> (<em>str</em>) – O caminho da pasta onde os arquivos vão ser salvos.</p></li>
<li><p><strong>add_info</strong> (<em>array like</em>) – Um array like contendo os nomes das informações a
serem adicionadas no arquivo de saída (como temp, strain, etc…)</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – A quantidade de espectros a serem analisados entre
cada salvamento de segurança (checkpoint.csv)</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.MassSpectraData.add_step">
<code class="sig-name descname">add_step</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">step</span></em>, <em class="sig-param"><span class="n">kwargs</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.MassSpectraData.add_step" title="Permalink to this definition">¶</a></dt>
<dd><p>Adiciona uma função para ser aplicada à todos os espectros, com os
argumentos definidos no dicionário kwargs. Se a função tiver
argumentos obrigatórios, esses devem estar inclusos no kwargs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step</strong> (<em>Uma função</em>) – A função a ser adicionada. Deve aceitar um objeto da
classe SpectrumData como primeiro argumento ou ser uma função da
classe.</p></li>
<li><p><strong>kwargs</strong> (<em>dict</em><em>, </em><em>optional</em>) – Um dicionário contendo pares com a key sendo uma str
com o nome de um argumento da função em step e value o valor desse
argumento.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.MassSpectraData.export_csv">
<code class="sig-name descname">export_csv</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">export_name</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.MassSpectraData.export_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Exporta o dataframe atual como um csv</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>export_name</strong> (<em>str</em>) – O nome do arquivo de saída</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.MassSpectraData.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.MassSpectraData.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Aplica todas as funções em self.steps a todos os espectros (um por
vez).  Ao finalizar as funções de um espectro, tenta passar as
informações definidas no self.columns para o dataframe do objeto.
Salva checkpoints a cada intervalo de self.batch_size e um último
no final.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="process_spectra.SpectrumData">
<em class="property">class </em><code class="sig-prename descclassname">process_spectra.</code><code class="sig-name descname">SpectrumData</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Uma classe usada para processar as informações de um espectro, com o
objetivo final de extrair o comprimento de onda e atenuação do vale
ressonante.</p>
<dl class="py method">
<dt id="process_spectra.SpectrumData.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">quiet</span><span class="o">=</span><span class="default_value">False</span></em>, <em class="sig-param"><span class="n">name</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Inicia o objeto, criando umas variáveis necessárias e carregando o
espectro.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> (<em>str</em>) – O nome do arquivo do espectro (saída do optisystem)</p></li>
<li><p><strong>quiet</strong> (<em>bool</em><em>, </em><em>optional</em>) – Se True, o programa deixa de dar mensagens a cada etapa,
False por padrão.</p></li>
<li><p><strong>name</strong> (<em>str</em><em>, </em><em>optional</em>) – O nome do espectro. Usado para motivos de salvar e debug.
É o filename, removendo a extensão, por padrão</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.filter_spectrum">
<code class="sig-name descname">filter_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">window_length</span></em>, <em class="sig-param"><span class="n">polyorder</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.filter_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Filtra o espectro utilizando o filtro de Savitzky–Golay</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>window_length</strong> (<em>int</em><em>, </em><em>deve ser ímpar</em>) – O tamanho da ‘janela do filtro’ (o número de
coeficientes usados nos cálculos do filtro.</p></li>
<li><p><strong>polyorder</strong> (<em>int</em><em>, </em><em>deve ser menor do que o 'window_length'</em>) – A ordem dos polinômios usados nos cálculos do filtro</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>O espectro (objeto dessa classe) após aplicação do filtro.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.find_valley">
<code class="sig-name descname">find_valley</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">prominence</span><span class="o">=</span><span class="default_value">5</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.find_valley" title="Permalink to this definition">¶</a></dt>
<dd><p>Tenta achar o vale ressonante do espectro. Se achar, salva no
dicionário ‘info’ objeto.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>prominence</strong> (<em>float</em>) – A ‘proeminência’ (‘altura do pico’) mínima do vale.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>As coordenadas do vale (comprimento de onda, potência)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.interpolate_spectrum">
<code class="sig-name descname">interpolate_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wl_step</span></em>, <em class="sig-param"><span class="n">wl_limits</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">kind</span><span class="o">=</span><span class="default_value">'cubic'</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.interpolate_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpola o espectro para os valores de comprimento de onda dentro dos
limites, considerando incrementos discretos de ‘wl_step’.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wl_step</strong> (<em>float</em>) – O tamanho do incremento.</p></li>
<li><p><strong>wl_limits</strong> (<em>tuple with 2 floats</em>) – Os limites da região para interpolar. Usa os limites
do espectro original como padrão.</p></li>
<li><p><strong>kind</strong> (<em>str</em>) – Tipo de interpolação. Deve ser um desses: (‘linear’,
‘nearest’, ‘zero’, ‘slinear’, ‘quadratic’, ‘cubic’, ‘previous’,
‘next’).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>O espectro (objeto dessa classe) gerado pela interpolação.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.mask_spectrum">
<code class="sig-name descname">mask_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">wl_limits</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.mask_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>Corta o espectro com base em um intervalo de comprimento de onda</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>wl_limits</strong> (<em>tuple</em>) – Uma tupla com 2 valores, contendo os limites do corte</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>O espectro (objeto dessa classe) cortado</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.plot_spectrum">
<code class="sig-name descname">plot_spectrum</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">plot_opts</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">subplots</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.plot_spectrum" title="Permalink to this definition">¶</a></dt>
<dd><p>plota o espectro em um gráfico, com o vale marcado com um x, se tiver
sido encontrado</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>plot_opts</strong> (<em>dict</em>) – Um dicionário com opções para plotar, se nenhum for
passado, será usado um padrão definido na função.</p></li>
<li><p><strong>subplots</strong> (<em>tuple</em>) – Os objetos criados pelo matplotlib para fazer um plot,
retornados pelo ‘plt.subplots()’. Geralmente salvos como (fig, ax).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="process_spectra.SpectrumData.set_additional_info">
<code class="sig-name descname">set_additional_info</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">info</span></em><span class="sig-paren">)</span><a class="headerlink" href="#process_spectra.SpectrumData.set_additional_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Adiciona informações adicionais ao espectro, como medidas, por exemplo</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>info</strong> (<em>dict</em>) – Um dicionário com as informações a serem adicionadas.
Ex: { ‘periodo’: 400 , ‘temp’: 20, ‘strain’: 200, ‘mode’: 4 }</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="process_spectra.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">process_spectra today documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">process_spectra module</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2020, UFJF.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.2.1.
    </div>
  </body>
</html>